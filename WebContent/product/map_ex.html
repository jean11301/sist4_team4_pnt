<div id="map" style="width:100%; height:390px; margin-top:10px"></div>
<script>

function initMap() {
	map = new google.maps.Map(document.getElementById("map"), {
		center: { lat: 7.24873, lng: 104.85541 },
		zoom: 5,
	 });
}
function drawMarkers(serverdata){
	let idx = serverdata.lastIndexOf(",");
	let location = null;
	if(idx > -1) location = serverdata.substring(0, idx) + "]}"; 
	else location = serverdata;
	console.log(location);
	location = location.trim();
	let obj = JSON.parse(location);
	let array = obj.data;  
	for(let i = 0 ; i < array.length ; i++){
		const marker = new google.maps.Marker({
        /*position: {latitude: array[i].latitude,
    	  longitude: array[i].longitude},*/
        position: new google.maps.LatLng(array[i].latitude, array[i].longitude),		   
        map: map,
      	});	
		map.addListener("center_changed", () => {
			    // 3 seconds after the center of the map has changed, pan back to the
			    // marker.
			    window.setTimeout(() => {
			      map.panTo(marker.getPosition());
			    }, 3000);
			  });
		marker.addListener("click", () => {
		    map.setZoom(15);
		    map.setCenter(marker.getPosition());
		  });
	}
}
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCSrewH1w0TEGYfZhYdaGT-lsuEyvI27Ic&callback=initMap" async
defer></script>
